<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Personal Cloud with Nextcloud</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="01.html"><strong aria-hidden="true">1.</strong> Why You Need Docker?</a></li><li class="chapter-item expanded "><a href="02.html"><strong aria-hidden="true">2.</strong> How Docker Works?</a></li><li class="chapter-item expanded "><a href="03.html"><strong aria-hidden="true">3.</strong> Installing Docker on Linux</a></li><li class="chapter-item expanded "><a href="04.html"><strong aria-hidden="true">4.</strong> Installing Docker on Mac</a></li><li class="chapter-item expanded "><a href="07.html"><strong aria-hidden="true">5.</strong> Verifying the Installation</a></li><li class="chapter-item expanded "><a href="08.html"><strong aria-hidden="true">6.</strong> Starting a Busybox</a></li><li class="chapter-item expanded "><a href="09.html"><strong aria-hidden="true">7.</strong> Running Commands Inside the Container</a></li><li class="chapter-item expanded "><a href="10.html"><strong aria-hidden="true">8.</strong> WebApps and Port Mapping</a></li><li class="chapter-item expanded "><a href="11.html"><strong aria-hidden="true">9.</strong> The Detached Mode</a></li><li class="chapter-item expanded "><a href="12.html"><strong aria-hidden="true">10.</strong> Accessing a Shell in Detached Mode</a></li><li class="chapter-item expanded "><a href="13.html"><strong aria-hidden="true">11.</strong> Passing Files to Containers</a></li><li class="chapter-item expanded "><a href="14.html"><strong aria-hidden="true">12.</strong> Stopping Containers, Deleting Images and Containers</a></li><li class="chapter-item expanded "><a href="15.html"><strong aria-hidden="true">13.</strong> Starting Containers Automatically</a></li><li class="chapter-item expanded "><a href="16.html"><strong aria-hidden="true">14.</strong> Viewing Statistics of Running Containers</a></li><li class="chapter-item expanded "><a href="17.html"><strong aria-hidden="true">15.</strong> Limiting Container Resources</a></li><li class="chapter-item expanded "><a href="18.html"><strong aria-hidden="true">16.</strong> Viewing Logs</a></li><li class="chapter-item expanded "><a href="19.html"><strong aria-hidden="true">17.</strong> Logging to a File</a></li><li class="chapter-item expanded "><a href="20.html"><strong aria-hidden="true">18.</strong> Dockerfiles</a></li><li class="chapter-item expanded "><a href="21.html"><strong aria-hidden="true">19.</strong> Building and Running Dockerfiles</a></li><li class="chapter-item expanded "><a href="22.html"><strong aria-hidden="true">20.</strong> Sharing Images on Docker Hub</a></li><li class="chapter-item expanded "><a href="23.html"><strong aria-hidden="true">21.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="24.html"><strong aria-hidden="true">22.</strong> Python Deployment with Docker</a></li><li class="chapter-item expanded "><a href="25.html"><strong aria-hidden="true">23.</strong> Node.js Deployment with Docker</a></li><li class="chapter-item expanded "><a href="26.html"><strong aria-hidden="true">24.</strong> Email Server with MailCow</a></li><li class="chapter-item expanded "><a href="27.html" class="active"><strong aria-hidden="true">25.</strong> Personal Cloud with Nextcloud</a></li><li class="chapter-item expanded "><a href="28.html"><strong aria-hidden="true">26.</strong> More Options in Docker Compose Files</a></li><li class="chapter-item expanded "><a href="29.html"><strong aria-hidden="true">27.</strong> Swarms</a></li><li class="chapter-item expanded "><a href="30.html"><strong aria-hidden="true">28.</strong> Installing Docker Machine on Linux</a></li><li class="chapter-item expanded "><a href="31.html"><strong aria-hidden="true">29.</strong> Creating Local Virtual Machines</a></li><li class="chapter-item expanded "><a href="32.html"><strong aria-hidden="true">30.</strong> Additional Information about VMs</a></li><li class="chapter-item expanded "><a href="33.html"><strong aria-hidden="true">31.</strong> Creating a Swarm</a></li><li class="chapter-item expanded "><a href="34.html"><strong aria-hidden="true">32.</strong> Hosting an App in a Swarm</a></li><li class="chapter-item expanded "><a href="35.html"><strong aria-hidden="true">33.</strong> Stopping the Stack, Leaving the Swarm</a></li><li class="chapter-item expanded "><a href="36.html"><strong aria-hidden="true">34.</strong> Starting an Image Only on the Manager</a></li><li class="chapter-item expanded "><a href="37.html"><strong aria-hidden="true">35.</strong> Publishing a Single Service in the Cluster</a></li><li class="chapter-item expanded "><a href="38.html"><strong aria-hidden="true">36.</strong> Updating Services</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="setting-up-your-own-cloud-with-nextcloud"><a class="header" href="#setting-up-your-own-cloud-with-nextcloud">Setting Up Your Own Cloud with Nextcloud</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>In this tutorial, we will set up our own cloud service using Nextcloud with Docker. This guide is designed to be simple and straightforward, providing a step-by-step approach to deploying Nextcloud. Before we begin, ensure that Docker is installed on your server. If you are unfamiliar with Docker, refer to earlier tutorials for a comprehensive introduction.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ol>
<li>A server with Docker installed.</li>
<li>Basic knowledge of Docker commands.</li>
</ol>
<h2 id="steps-to-set-up-nextcloud"><a class="header" href="#steps-to-set-up-nextcloud">Steps to Set Up Nextcloud</a></h2>
<h3 id="1-pull-the-nextcloud-docker-image"><a class="header" href="#1-pull-the-nextcloud-docker-image">1. Pull the Nextcloud Docker Image</a></h3>
<p>To start, we need to pull the Nextcloud image from Docker Hub. Open your terminal and execute the following command:</p>
<pre><code class="language-bash">sudo docker pull nextcloud
</code></pre>
<p>This command downloads the Nextcloud image to your local Docker environment. Note that the image size is relatively large, so the download may take some time depending on your internet connection.</p>
<h3 id="2-run-the-nextcloud-container"><a class="header" href="#2-run-the-nextcloud-container">2. Run the Nextcloud Container</a></h3>
<p>Once the image is downloaded, we can run the Nextcloud container. Use the following command:</p>
<pre><code class="language-bash">sudo docker run -d -p 80:80 nextcloud
</code></pre>
<p>Explanation of the command:</p>
<ul>
<li><code>-d</code>: Runs the container in detached mode, meaning it will run in the background.</li>
<li><code>-p 80:80</code>: Maps port 80 of the host to port 80 of the container.</li>
</ul>
<p>After running this command, Nextcloud will be up and running. You can verify this by visiting <code>http://localhost</code> in your web browser.</p>
<h3 id="3-initial-setup"><a class="header" href="#3-initial-setup">3. Initial Setup</a></h3>
<p>Upon accessing Nextcloud for the first time, you will be prompted to create an administrator account. Enter a username and password of your choice.</p>
<p>Nextcloud defaults to using SQLite as the database backend. While SQLite is sufficient for personal use or light loads, it is not recommended for environments with many users or heavy traffic. For more robust performance, you should use MySQL, MariaDB, or PostgreSQL.</p>
<h3 id="4-using-an-alternative-database"><a class="header" href="#4-using-an-alternative-database">4. Using an Alternative Database</a></h3>
<p>If you choose to use a more robust database system, follow these steps. In this example, we will use MySQL.</p>
<h4 id="step-41-set-up-a-mysql-container"><a class="header" href="#step-41-set-up-a-mysql-container">Step 4.1: Set Up a MySQL Container</a></h4>
<p>First, we need to run a MySQL container. Execute the following command:</p>
<pre><code class="language-bash">sudo docker run -d --name nextcloud-db -e MYSQL_ROOT_PASSWORD=yourpassword -e MYSQL_DATABASE=nextcloud -e MYSQL_USER=nextcloud -e MYSQL_PASSWORD=yourpassword mysql:5.7
</code></pre>
<h4 id="step-42-connect-nextcloud-to-mysql"><a class="header" href="#step-42-connect-nextcloud-to-mysql">Step 4.2: Connect Nextcloud to MySQL</a></h4>
<p>When setting up Nextcloud, provide the database details as follows:</p>
<ul>
<li><strong>Database User</strong>: <code>nextcloud</code></li>
<li><strong>Database Password</strong>: <code>yourpassword</code></li>
<li><strong>Database Name</strong>: <code>nextcloud</code></li>
<li><strong>Database Host</strong>: <code>nextcloud-db:3306</code></li>
</ul>
<h3 id="5-running-nextcloud-with-docker-compose"><a class="header" href="#5-running-nextcloud-with-docker-compose">5. Running Nextcloud with Docker Compose</a></h3>
<p>For a more complex setup, Docker Compose can be used. Create a <code>docker-compose.yml</code> file with the following content:</p>
<pre><code class="language-yaml">version: '3'

services:
  db:
    image: mysql:5.7
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: yourpassword
      MYSQL_DATABASE: nextcloud
      MYSQL_USER: nextcloud
      MYSQL_PASSWORD: yourpassword

  app:
    image: nextcloud
    ports:
      - 80:80
    links:
      - db
    volumes:
      - nextcloud:/var/www/html

volumes:
  nextcloud:
</code></pre>
<p>Deploy the setup using the following command:</p>
<pre><code class="language-bash">sudo docker-compose up -d
</code></pre>
<p>This command will start both the Nextcloud application and the MySQL database in the background, configured to work together seamlessly.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>You have successfully set up Nextcloud using Docker. This powerful tool allows you to manage files, calendars, contacts, and more, similar to Google Drive or Dropbox, but hosted on your own server. For large-scale deployments, consider using a more robust database system like MySQL, MariaDB, or PostgreSQL.</p>
<p>If you encounter any issues or have further questions, please refer to the Nextcloud documentation or seek assistance from the community.</p>
<pre><code class="language-markdown">Note: Replace `yourpassword` with a secure password of your choice.
</code></pre>
<p>By following these steps, you can have your cloud service up and running efficiently, tailored to your needs and scale.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="26.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="28.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="26.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="28.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
